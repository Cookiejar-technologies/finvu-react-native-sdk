{"version":3,"file":"index.js","sourceRoot":"","sources":["../src/index.ts"],"names":[],"mappings":"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","sourcesContent":["import { EventEmitter, NativeModulesProxy, EventSubscription } from 'expo-modules-core';\nimport FinvuModule from './FinvuModule';\nimport type { ConsentDetail, DiscoverAccountsResponse, DiscoveredAccount, FinvuConfig, FipDetails, FipsAllFIPOptionsResponse, LinkedAccountDetails, LoginWithUsernameOrMobileNumberResponse, EventDefinition, FinvuEvent, FinvuEventListener, ConsentHandleStatusResponse, AccountAggregatorView, FIPReferenceView, FinvuError, FinvuErrorCode } from './Finvu.types';\nimport { ConsentHandleStatus } from './Finvu.types';\n\n// Define the event types for the EventEmitter\ntype FinvuEvents = {\n  onConnectionStatusChange: (event: { status: string }) => void;\n  onLoginOtpReceived: (event: any) => void;\n  onLoginOtpVerified: (event: any) => void;\n  onEvent: (event: FinvuEvent) => void;\n};\n\nconst emitter = new EventEmitter<FinvuEvents>(FinvuModule ?? NativeModulesProxy.Finvu);\n\n// Define a consistent Result type for all responses\nexport type Result<T> = \n  | { isSuccess: true, data: T }  // Success response\n  | { isSuccess: false, error: FinvuError };  // Error response\n\n// Helper function to handle promises and standardize errors\nasync function handleResult<T>(promise: Promise<any>, errorMessage: string): Promise<Result<T>> {\n  try {\n    const result = await promise;\n    \n    // Parse JSON if result is a string that looks like JSON\n    let data: T;\n    if (typeof result === 'string' && result.startsWith('{')) {\n      try {\n        data = JSON.parse(result);\n      } catch {\n        data = result as unknown as T;\n      }\n    } else {\n      data = result as T;\n    }\n    \n    return { isSuccess: true, data }; \n  } catch (error: any) {\n    console.error(`${errorMessage}:`, error);\n    // Extract error code and message from the error\n    const errorCode: FinvuErrorCode = error?.code || error?.name || '9999';\n    const errorMessageText: string = error?.message || error?.localizedDescription || errorMessage;\n    \n    return { \n      isSuccess: false, \n      error: { \n        code: errorCode,\n        message: errorMessageText\n      } \n    };\n  }\n}\n\n// Helper function to handle synchronous calls and standardize errors\nfunction handleSyncResult<T>(fn: () => T, errorMessage: string): Result<T> {\n  try {\n    const result = fn();\n    return { isSuccess: true, data: result }; \n  } catch (error: any) {\n    console.error(`${errorMessage}:`, error);\n    // Extract error code and message from the error\n    const errorCode: FinvuErrorCode = error?.code || error?.name || '9999';\n    const errorMessageText: string = error?.message || error?.localizedDescription || errorMessage;\n    \n    return { \n      isSuccess: false, \n      error: { \n        code: errorCode,\n        message: errorMessageText\n      } \n    };\n  }\n}\n\n/**\n * Initialize the Finvu SDK with configuration options\n * @param config Configuration for the Finvu SDK\n */\nexport async function initializeWith(config: FinvuConfig): Promise<Result<string>> {\n  return handleResult(FinvuModule.initializeWith(config), 'Initialization failed');\n}\n\n/**\n * Connect to the Finvu service\n */\nexport async function connect(): Promise<Result<void>> {\n  return handleResult(FinvuModule.connect(), 'Connection failed');\n}\n\n/**\n * Disconnect from the Finvu service\n */\nexport async function disconnect() : Promise<Result<void>> {\n  return handleResult(FinvuModule.disconnect(), 'Failed to disconnect from finvu');\n}\n\n/**\n * Checks if the user is currently connected to the Finvu service.\n *\n * @returns A `Result` object containing a boolean indicating connection status.\n * Returns `true` if connected, `false` otherwise.\n */\nexport async function isConnected(): Promise<Result<boolean>> {\n  return handleResult(FinvuModule.isConnected(), 'Failed to fetch connection status from Finvu.');\n}\n\n/**\n * Checks if there is an active session with the Finvu service.\n *\n * @returns A `Result` object containing a boolean:\n * - `true` if a session exists,\n * - `false` if no session is found.\n */\nexport async function hasSession(): Promise<Result<boolean>> {\n  return handleResult(FinvuModule.hasSession(), 'Unable to determine if a Finvu session exists.');\n}\n\n/**\n * Login with username or mobile number\n * @param username Username (email format)\n * @param mobileNumber Mobile number\n * @param consentHandleId Consent handle ID\n */\nexport async function loginWithUsernameOrMobileNumber(\n  username: string, \n  mobileNumber: string, \n  consentHandleId: string\n): Promise<Result<LoginWithUsernameOrMobileNumberResponse>> {\n  return handleResult(\n    FinvuModule.loginWithUsernameOrMobileNumber(username, mobileNumber, consentHandleId),\n    'Login failed'\n  );\n}\n\n/**\n * Verify login OTP\n * @param otp OTP received by the user\n * @param otpReference Reference from the login response\n */\nexport async function verifyLoginOtp(\n  otp: string, \n  otpReference: string\n): Promise<Result<{ userId: string }>> {\n  return handleResult(\n    FinvuModule.verifyLoginOtp(otp, otpReference),\n    'OTP verification failed'\n  );\n}\n\n/**\n * Discover accounts at a financial institution\n * @param fipId Financial Information Provider ID\n * @param fiTypes Financial Information types\n * @param identifiers Array of identifier objects\n */\nexport async function discoverAccounts(\n  fipId: string,\n  fiTypes: string[],\n  identifiers: { category: string; type: string; value: string }[]\n): Promise<Result<DiscoverAccountsResponse>> {\n  return handleResult(\n    FinvuModule.discoverAccounts(fipId, fiTypes, identifiers),\n    'Discovering accounts failed'\n  );\n}\n\n/**\n * Get a list of all FIP options\n */\nexport async function fipsAllFIPOptions(): Promise<Result<FipsAllFIPOptionsResponse>> {\n  return handleResult(FinvuModule.fipsAllFIPOptions(), 'Fetching FIPs failed');\n}\n\n/**\n * Fetch linked accounts\n */\nexport async function fetchLinkedAccounts(): Promise<Result<{ linkedAccounts: any[] }>> {\n  return handleResult(FinvuModule.fetchLinkedAccounts(), 'Fetching linked accounts failed');\n}\n\n/**\n * Link accounts\n * @param accounts Array of discovered accounts\n * @param fipDetails FIP details object\n */\nexport async function linkAccounts(\n  accounts: DiscoveredAccount[],\n  fipDetails: FipDetails\n): Promise<Result<{ linkedAccounts?: any[], referenceNumber?: string }>> {\n  return handleResult(\n    FinvuModule.linkAccounts(\n      JSON.parse(JSON.stringify(accounts)),\n      JSON.parse(JSON.stringify(fipDetails))\n    ),\n    'Linking accounts failed'\n  );\n}\n\n/**\n * Confirm account linking\n * @param referenceNumber Reference number from linkAccounts response\n * @param otp OTP received by the user\n */\nexport async function confirmAccountLinking(\n  referenceNumber: string, \n  otp: string\n): Promise<Result<any>> {\n  return handleResult(\n    FinvuModule.confirmAccountLinking(referenceNumber, otp),\n    'Confirming account linking failed'\n  );\n}\n\n/**\n * Approve consent request\n * @param consentDetails Consent details object\n * @param finvuLinkedAccounts Array of linked account details\n */\nexport async function approveConsentRequest(\n  consentDetails: ConsentDetail, \n  finvuLinkedAccounts: LinkedAccountDetails[]\n): Promise<Result<any>> {\n  return handleResult(\n    FinvuModule.approveConsentRequest(\n      JSON.parse(JSON.stringify(consentDetails)),\n      JSON.parse(JSON.stringify(finvuLinkedAccounts))\n    ),\n    'Approving consent failed'\n  );\n}\n\n/**\n * Deny consent request\n * @param consentRequestDetailInfo Consent details object\n */\nexport async function denyConsentRequest(\n  consentRequestDetailInfo: ConsentDetail\n): Promise<Result<any>> {\n  return handleResult(\n    FinvuModule.denyConsentRequest(JSON.parse(JSON.stringify(consentRequestDetailInfo))),\n    'Denying consent failed'\n  );\n}\n\n/**\n * Fetch FIP details\n * @param fipId Financial Information Provider ID\n */\nexport async function fetchFipDetails(fipId: string): Promise<Result<FipDetails>> {\n  return handleResult(FinvuModule.fetchFipDetails(fipId), 'Fetching FIP details failed');\n}\n\n/**\n * Get entity information\n * @param entityId Entity ID\n * @param entityType Entity type\n */\nexport async function getEntityInfo(\n  entityId: string, \n  entityType: string\n): Promise<Result<any>> {\n  return handleResult(FinvuModule.getEntityInfo(entityId, entityType), 'Getting entity info failed');\n}\n\n/**\n * Get consent request details\n * @param consentHandleId Consent handle ID\n */\nexport async function getConsentRequestDetails(\n  consentHandleId: string\n): Promise<Result<ConsentDetail>> {\n  return handleResult(FinvuModule.getConsentRequestDetails(consentHandleId), 'Fetching consent request details failed');\n}\n\n/**\n * Get consent handle status\n * @param handleId Consent handle ID\n */\nexport async function getConsentHandleStatus(\n  handleId: string\n): Promise<Result<ConsentHandleStatusResponse>> {\n  try {\n    const result = await FinvuModule.getConsentHandleStatus(handleId);\n    \n    // Parse JSON if result is a string\n    let data: any;\n    if (typeof result === 'string' && result.startsWith('{')) {\n      try {\n        data = JSON.parse(result);\n      } catch {\n        data = result;\n      }\n    } else {\n      data = result;\n    }\n    \n    // Convert status string to enum\n    const statusString = data?.status;\n    let status: ConsentHandleStatus;\n    if (statusString === 'ACCEPT') {\n      status = ConsentHandleStatus.ACCEPT;\n    } else if (statusString === 'DENY') {\n      status = ConsentHandleStatus.DENY;\n    } else if (statusString === 'PENDING') {\n      status = ConsentHandleStatus.PENDING;\n    } else {\n      status = statusString as ConsentHandleStatus;\n    }\n    \n    return { \n      isSuccess: true, \n      data: { status } \n    };\n  } catch (error: any) {\n    console.error('Getting consent handle status failed:', error);\n    const errorCode: FinvuErrorCode = error?.code || error?.name || '9999';\n    const errorMessageText: string = error?.message || error?.localizedDescription || 'Getting consent handle status failed';\n    \n    return { \n      isSuccess: false, \n      error: { \n        code: errorCode,\n        message: errorMessageText\n      } \n    };\n  }\n}\n\n/**\n * Revoke consent\n * @param consentId Consent ID to revoke\n * @param accountAggregatorView Optional account aggregator view\n * @param fipDetails Optional FIP reference details\n */\nexport async function revokeConsent(\n  consentId: string,\n  accountAggregatorView?: AccountAggregatorView | null,\n  fipDetails?: FIPReferenceView | null\n): Promise<Result<void>> {\n  return handleResult(\n    FinvuModule.revokeConsent(\n      consentId,\n      accountAggregatorView ? JSON.parse(JSON.stringify(accountAggregatorView)) : null,\n      fipDetails ? JSON.parse(JSON.stringify(fipDetails)) : null\n    ),\n    'Revoking consent failed'\n  );\n}\n\n/**\n * Logout from Finvu\n */\nexport async function logout(): Promise<Result<void>> {\n  return handleResult(FinvuModule.logout(), 'Logout failed');\n}\n\n/**\n * Add listener for connection status changes\n */\nexport function addConnectionStatusChangeListener(\n  listener: (event: { status: string }) => void\n): EventSubscription {\n  return emitter.addListener('onConnectionStatusChange', listener);\n}\n\n/**\n * Add listener for login OTP received\n */\nexport function addLoginOtpReceivedListener(\n  listener: (event: any) => void\n): EventSubscription {\n  return emitter.addListener('onLoginOtpReceived', listener);\n}\n\n/**\n * Add listener for login OTP verified\n */\nexport function addLoginOtpVerifiedListener(\n  listener: (event: any) => void\n): EventSubscription {\n  return emitter.addListener('onLoginOtpVerified', listener);\n}\n\n// Event Tracking Methods\n\n// Track if native listener has been added\nlet nativeListenerAdded = false;\n\n/**\n * Enable or disable event tracking\n * @param enabled Whether to enable event tracking\n */\nexport function setEventsEnabled(enabled: boolean): Result<void> {\n  return handleSyncResult(() => {\n    FinvuModule.setEventsEnabled(enabled);\n    return undefined;\n  }, 'Failed to set events enabled');\n}\n\n/**\n * Add event listener to receive SDK events\n * This function automatically sets up the native listener bridge if not already set up.\n * \n * @param listener Callback function to receive events\n * @returns EventSubscription that can be used to remove the listener\n * \n * @example\n * ```typescript\n * const subscription = addEventListener((event) => {\n *   console.log('Event:', event.eventName, event.params);\n * });\n * \n * // Later, to remove:\n * subscription.remove();\n * ```\n */\nexport function addEventListener(\n  listener: FinvuEventListener\n): EventSubscription {\n  // Automatically set up native listener bridge on first call\n  if (!nativeListenerAdded) {\n    const result = handleSyncResult(() => {\n      FinvuModule.addEventListener();\n      return undefined;\n    }, 'Failed to add native event listener');\n    \n    if (result.isSuccess) {\n      nativeListenerAdded = true;\n    } else {\n      console.warn('Failed to set up native event listener:', result.error);\n    }\n  }\n  \n  return emitter.addListener('onEvent', listener);\n}\n\n/**\n * Remove event listener\n * Note: Call this when you no longer need to receive events (e.g., on app termination)\n */\nexport function removeEventListener(): Result<void> {\n  nativeListenerAdded = false;\n  return handleSyncResult(() => {\n    FinvuModule.removeEventListener();\n    return undefined;\n  }, 'Failed to remove event listener');\n}\n\n/**\n * Register custom events before tracking them\n * @param events Map of event names to EventDefinition objects\n */\nexport function registerCustomEvents(\n  events: Record<string, EventDefinition>\n): Result<void> {\n  return handleSyncResult(() => {\n    FinvuModule.registerCustomEvents(events);\n    return undefined;\n  }, 'Failed to register custom events');\n}\n\n/**\n * Track a custom event\n * @param eventName Name of the event to track (must be registered first)\n * @param params Optional parameters for the event\n */\nexport function track(\n  eventName: string,\n  params?: Record<string, any>\n): Result<void> {\n  return handleSyncResult(() => {\n    FinvuModule.track(eventName, params || {});\n    return undefined;\n  }, 'Failed to track event');\n}\n\n/**\n * Register aliases for SDK event names\n * @param aliases Map of SDK event names to custom alias names\n */\nexport function registerAliases(\n  aliases: Record<string, string>\n): Result<void> {\n  return handleSyncResult(() => {\n    FinvuModule.registerAliases(aliases);\n    return undefined;\n  }, 'Failed to register aliases');\n}\n\n\nexport { default } from './FinvuModule';\nexport * from './Finvu.types';"]}